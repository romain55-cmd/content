import React from "react";
import { Button } from "@/components/ui/button";
import { ClipboardList, CalendarDays, Wand2, Rocket } from "lucide-react";

export const getQAPrompt = () => `Оптимальный режим активирован.

Вы действуете как эксперт уровня Альберта Эйнштейна в области машинного обучения, анализа данных и обеспечения качества программного обеспечения. Ваша задача — провести всесторонний и исчерпывающий анализ завершённого приложения Momentum Amplify, чтобы убедиться, что оно безупречно и превосходит все другие приложения в своей категории. Вы будете выступать в роли главного контролёра качества, выявляя каждую слабость и предлагая улучшения для усиления приложения во всех аспектах.

Инструкции:
Этап 1: Комплексное тестирование функциональности
1) Навигация и ссылки: Нажмите на каждую ссылку, кнопку и вкладку. Проверьте правильность страницы/модального окна, полную загрузку, плавные переходы, правильное назначение; включите внутренние и внешние ссылки. Отметьте любые сломанные/неправильно перенаправленные ссылки.
2) Загрузка и отображение контента: Откройте каждую вкладку/подменю/выпадающий список/раскрываемый элемент. Проверьте полную загрузку, правильные форматы, отсутствие наложений/пустых мест/усечений, плавную прокрутку/пагинацию, загрузку всех изображений и их оптимизацию. Сообщите о любых проблемах.
3) Формы и валидация ввода: Взаимодействуйте со всеми полями ввода и отправкой. Проверьте типы данных, валидацию, полезные ошибки, успешное сохранение и подтверждения. Сообщите о любых проблемах с валидацией/сохранением/отправкой.
4) Симуляция пользовательских сценариев: Симулируйте сквозные сценарии (новая регистрация→онбординг→основное использование→выход; существующий вход→обновление профиля→покупка→поддержка). Проверьте ясность, отсутствие тупиков и премиум-ограничений. Сообщите о трениях/путанице.

Этап 2: Оптимизация UI/UX и производительности
5) Консистентность и полировка UI/UX: Проверьте консистентность шрифтов/цветов/отступов, чёткие метки, современные визуальные элементы, отсутствие обрезания/наложений на разных размерах экрана, доступность (контраст, навигация с клавиатуры). Предоставьте конкретные улучшения.
6) Производительность и отзывчивость: Тестируйте на разных устройствах/сетях. Проверьте быструю загрузку, отзывчивые точки останова, плавные анимации и минимальное использование ресурсов. Определите узкие места и оптимизации.
7) Доступность и ясность: Убедитесь в достаточном контрасте, метках/подсказках, полной навигации с клавиатуры и альтернативном тексте. Предоставьте конкретные исправления доступности.

Этап 3: Безопасность и конфиденциальность
8) Основы безопасности и конфиденциальности: Проверьте безопасную аутентификацию, шифрование при передаче/хранении, работу выхода, безопасные внешние интеграции (социальный вход, платежи) и соответствие конфиденциальности. Сообщите о рисках.

Этап 4: Отчётность и оценка
9) Выведите отчёт с: Краткое резюме; Подробный список проблем (Критические/Основные/Второстепенные с шагами воспроизведения); Рекомендации по оптимизации; Балл готовности (0–100) с обоснованием. Будьте конкретны, практичны и действенны.`;

const chips = [
  { label: "Полный QA + UX аудит", icon: ClipboardList, getText: getQAPrompt },
  { label: "План на 2 недели", icon: CalendarDays, getText: () => "Составьте оптимальный график публикаций на 2 недели для моих выбранных платформ. Укажите даты, время и типы постов, затем спросите подтверждение перед планированием." },
  { label: "Улучшить черновик", icon: Wand2, getText: () => "Перепишите последний сгенерированный черновик для LinkedIn с более сильным хуком, 3 сканируемыми пунктами и убедительным призывом к действию. Сохраните объём до 220 слов." },
  { label: "Создать 3 идеи постов", icon: Rocket, getText: () => "Дайте мне 3 идеи контента с хуками и углами на основе моих столпов и тона. Выведите тему, хук, угол и призыв к действию." }
];

export default function PromptChips({ onInsertAndSend }) {
  return (
    <div className="flex flex-wrap gap-2">
      {chips.map((c) => (
        <Button
          key={c.label}
          type="button"
          variant="outline"
          onClick={() => onInsertAndSend(c.getText())}
          className="h-8 px-3 rounded-full text-xs"
          aria-label={c.label}
          title={c.label}
        >
          <c.icon className="w-3.5 h-3.5 mr-2" />
          {c.label}
        </Button>
      ))}
    </div>
  );
}