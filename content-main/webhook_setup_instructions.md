# Как настроить автоматические веб-хуки от Юкассы для локальной разработки

Чтобы ваш локальный сервер мог автоматически получать уведомления от Юкассы (веб-хуки), необходимо сделать его доступным из Интернета. Мы будем использовать для этого сервис под названием **ngrok**.

**Шаг 1: Установка ngrok**

Если у вас не установлен ngrok, вы можете установить его, следуя инструкциям на официальном сайте: [https://ngrok.com/download](https://ngrok.com/download)

Обычно это включает в себя загрузку и распаковку файла, а затем добавление его в ваш PATH.

**Шаг 2: Запуск ngrok**

Ваш сервер работает на порту `5001`. Откройте новое окно терминала и выполните следующую команду, чтобы создать туннель к вашему локальному серверу:

```bash
ngrok http 5001
```

**Ша- 3: Получение публичного URL**

После запуска ngrok вы увидите в терминале что-то вроде этого:

```
ngrok by @inconshreveable                                     (Ctrl+C to quit)

Session Status                online
Account                       YourName (Plan: Free)
Version                       3.x.x
Region                        United States (us)
Web Interface                 http://127.0.0.1:4040
Forwarding                    https://xxxxxxxxxxxx.ngrok.io -> http://localhost:5001

Connections                   ttl     opn     rt1     rt5     p50     p90
                              0       0       0.00    0.00    0.00    0.00
```

Скопируйте URL-адрес `Forwarding`, который заканчивается на `.ngrok.io`. В приведенном выше примере это `https://xxxxxxxxxxxx.ngrok.io`. **Это ваш публичный URL-адрес.**

**Шаг 4: Настройка веб-хука в Юкассе**

1.  Зайдите в личный кабинет Юкассы.
2.  Перейдите в раздел "Интеграция" -> "HTTP-уведомления".
3.  В поле "URL для уведомлений" вставьте ваш публичный URL-адрес, полученный от ngrok, и добавьте к нему путь к вашему обработчику веб-хуков: `/api/payments/webhook`.

    Пример: `https://xxxxxxxxxxxx.ngrok.io/api/payments/webhook`

4.  Сохраните изменения.

**Готово!**

Теперь, когда будет происходить успешный платеж, Юкасса отправит уведомление на ваш публичный URL-адрес ngrok, который перенаправит его на ваш локальный сервер. Вам больше не нужно будет нажимать кнопку для ручной активации подписки.
